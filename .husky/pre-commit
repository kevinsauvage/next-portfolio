#!/usr/bin/env sh

# Load nvm if available (for nvm users)
export NVM_DIR="$HOME/.nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"

# Change to project root directory
cd "$(dirname "$0")/.." || exit

# Run lint-staged - try npx first, fallback to direct binary
if command -v npx >/dev/null 2>&1; then
  npx lint-staged
else
  # Fallback: use lint-staged binary directly
  if [ -f "./node_modules/.bin/lint-staged" ]; then
    ./node_modules/.bin/lint-staged
  else
    echo "Error: lint-staged not found. Please run 'npm install'"
    exit 1
  fi
fi
